### README
author: by JhuangGan
date: 20250307
说明文档如下，同时文件夹下的jupyternotebook文件为该整体脚本的副本保存

TEST/
├── data </br>
    ├──code1_Bitcoin.csv  </br>
    └── ... </br>
├── figures 用于保存各因子策略的收益率图
├── crawling_data.py  数据爬取脚本
├── zis_strategy.py  零投资多空策略脚本
└── pps.py  Principal Portfolios 组合优化脚本

#### 1. crawling_data.py  数据爬取脚本
python ./crawling_data.py 即可运行，同时，脚本默认从url的code从0-2000里依序爬取，爬取2020年3月5日到2025年3月5日的数据，仅保留市值大于1million的数据，同时仅保留五年时间完整的数据。最后爬取得到68个加密货币2020年3月5日到2025年3月5日的数据，保存为csv，存放在./data/文件夹下

#### 2. zis_strategy.py
定义以下三个类
crypto_currency class: 用于存储单个加密货币的数据，并计算相关指标，例如每日收益率，每周收益率
predictor class: 用于生成因子的类
zero_investment_strategy class：输入因子和加密货币类，计算其零投资多空策略的收益和相关指标
备注：
1. 零投资多空策略设定为：做多因子值最高的10个加密货币，做空因子值最低的10个加密货币，权重分别为1/20(多)和-1/20(空)
2. 保留论文里的周策略调整设定，以每周的周一为投资策略权重调整时点
3. 选择论文里的五个preditor作为多空策略，分别为MCAP, MAXDPRC, mom_r_1_0, mom_r_2_0, PRCVOL


#### 3. pps.py 
pps class: 实现pps优化策略和alpha，beta分解
备注：
1. 设定svd分解，保留前5个特征根对应的u, v向量，并对其多和空加权使其与零投资多空策略总权重相同
2. 保留论文里的周策略调整设定，以每周的周一为投资策略权重调整时点
3. 保留论文120滑动窗口的设定，用于估计预测矩阵


#### 4. 最终的结果：

| 多空策略    | 周期 | 周平均收益率    | 年化收益率 | 夏普比率 | 卡玛比率 |
|-------------|------|-----------------|------------|----------|----------|
| MCAP       | 周   | 0.0064          | 0.3159     | 0.9384   | 0.8027   |
| MAXDPRC    | 周   | 0.0070          | 0.3473     | 0.9599   | 1.1823   |
| mom_r_1_0  | 周   | -0.0065         | -0.3540    | -0.7969  | -0.3809  |
| mom_r_2_0  | 周   | -0.0089         | -0.4238    | -1.1786  | -0.4466  |
| PRCVOL     | 周   | 0.0099          | 0.5518     | 1.2732   | 2.1407   |

| PPS策略     | 版本   | 天平均收益率 | 年化收益率 | 夏普比率 | 卡玛比率 |
|--------------|--------|--------------|------------|----------|----------|
| MCAP         | --     | 0.0021       | 0.6556     | 1.0759   | 0.9015   |
| MCAP         | Alpha  | 0.0023       | 0.7889     | 1.1881   | 1.0832   |
| MCAP         | Beta   | 0.0023       | 0.7596     | 1.1573   | 1.0611   |
| MAXDPRC      | --     | 0.0018       | 0.5170     | 0.9521   | 0.6638   |
| MAXDPRC      | Alpha  | 0.0022       | 0.7456     | 1.1541   | 1.0295   |
| MAXDPRC      | Beta   | 0.0024       | 0.8852     | 1.2549   | 1.2153   |
| mom_r_1_0    | --     | 0.0021       | 0.6572     | 1.0753   | 0.8739   |
| mom_r_1_0    | Alpha  | 0.0020       | 0.6173     | 1.0439   | 0.8323   |
| mom_r_1_0    | Beta   | 0.0023       | 0.7671     | 1.1641   | 1.0435   |
| mom_r_2_0    | --     | 0.0023       | 0.7676     | 1.1611   | 1.0952   |
| mom_r_2_0    | Alpha  | 0.0023       | 0.8228     | 1.2101   | 1.1143   |
| mom_r_2_0    | Beta   | 0.0022       | 0.7220     | 1.1303   | 0.9514   |
| PRCVOL       | --     | 0.0021       | 0.6593     | 1.0828   | 0.8822   |
| PRCVOL       | Alpha  | 0.0021       | 0.6801     | 1.0960   | 0.9284   |
| PRCVOL       | Beta   | 0.0023       | 0.7875     | 1.1812   | 1.1236   |
